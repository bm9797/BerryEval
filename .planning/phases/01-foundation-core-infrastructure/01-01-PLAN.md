---
phase: 01-foundation-core-infrastructure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pyproject.toml
  - berryeval/__init__.py
  - berryeval/cli/__init__.py
  - berryeval/dataset/__init__.py
  - berryeval/retrievers/__init__.py
  - berryeval/metrics/__init__.py
  - berryeval/runner/__init__.py
  - berryeval/persistence/__init__.py
  - berryeval/config/__init__.py
  - native/include/.gitkeep
  - native/src/.gitkeep
  - native/bindings/.gitkeep
  - native/CMakeLists.txt
  - tests/__init__.py
  - tests/conftest.py
  - benchmarks/.gitkeep
  - README.md
  - .gitignore
autonomous: true
requirements:
  - PROJ-01
  - PROJ-02
  - PROJ-03
must_haves:
  truths:
    - "Developer can clone the repository and see the prescribed directory structure"
    - "pip install -e '.[dev]' succeeds without errors on Python 3.10+"
    - "ruff check . runs without configuration errors"
    - "ruff format --check . runs without configuration errors"
    - "mypy berryeval runs without configuration errors (may have zero files to check)"
    - "pytest runs successfully (with zero tests initially)"
  artifacts:
    - path: "pyproject.toml"
      provides: "Project metadata, dependencies, tool configuration"
      contains: "name = \"berryeval\""
    - path: "berryeval/__init__.py"
      provides: "Package root with version"
      contains: "__version__"
    - path: "berryeval/metrics/__init__.py"
      provides: "Metrics package placeholder"
    - path: "native/CMakeLists.txt"
      provides: "C build placeholder for Phase 5"
    - path: "tests/conftest.py"
      provides: "Shared test fixtures"
    - path: ".gitignore"
      provides: "Git ignore rules for Python project"
  key_links:
    - from: "pyproject.toml"
      to: "berryeval/"
      via: "setuptools package discovery"
      pattern: "packages.*berryeval"
    - from: "pyproject.toml"
      to: "berryeval/cli"
      via: "console_scripts entry point"
      pattern: "berryeval.*=.*berryeval.cli"
---

<objective>
Scaffold the BerryEval project with the PRD-prescribed repository structure, pyproject.toml packaging, and all development tooling configuration.

Purpose: Establish the foundational project structure that all subsequent phases build upon. Every developer tool (Ruff, mypy, pytest) must be configured and runnable from day one.
Output: A properly structured Python package that installs cleanly and passes all tooling checks.
</objective>

<execution_context>
@/Users/benjaminmarks/.claude/get-shit-done/workflows/execute-plan.md
@/Users/benjaminmarks/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-core-infrastructure/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create project structure and pyproject.toml</name>
  <files>
    pyproject.toml
    berryeval/__init__.py
    berryeval/cli/__init__.py
    berryeval/dataset/__init__.py
    berryeval/retrievers/__init__.py
    berryeval/metrics/__init__.py
    berryeval/metrics/_types.py
    berryeval/metrics/_validation.py
    berryeval/metrics/_python.py
    berryeval/metrics/_native.py
    berryeval/runner/__init__.py
    berryeval/persistence/__init__.py
    berryeval/config/__init__.py
    native/include/.gitkeep
    native/src/.gitkeep
    native/bindings/.gitkeep
    native/CMakeLists.txt
    tests/__init__.py
    tests/conftest.py
    tests/metrics/__init__.py
    benchmarks/.gitkeep
    .gitignore
    README.md
  </files>
  <action>
    Create the full project directory structure following the PRD-prescribed layout.

    **pyproject.toml** — Use setuptools backend. Include:
    - [build-system] with setuptools>=75.0
    - [project] with name="berryeval", version="0.1.0", requires-python=">=3.10", dependencies=["numpy>=2.0"]
    - [project.optional-dependencies] dev = ["ruff>=0.15.0", "mypy>=1.19.0", "pytest>=9.0", "pytest-cov>=7.0"]
    - [project.scripts] berryeval = "berryeval.cli:app"
    - [tool.ruff] target-version="py310", line-length=88
    - [tool.ruff.lint] select=["E","W","F","I","B","UP","SIM","TCH","RUF"], ignore=["E501"]
    - [tool.ruff.lint.isort] known-first-party=["berryeval"]
    - [tool.ruff.format] quote-style="double", indent-style="space"
    - [tool.mypy] python_version="3.10", strict=true, warn_return_any=true, warn_unused_configs=true
    - [[tool.mypy.overrides]] module="tests.*" with disallow_untyped_defs=false, disallow_untyped_decorators=false
    - [tool.pytest.ini_options] testpaths=["tests"], addopts="-ra --strict-markers"

    **berryeval/__init__.py** — Define __version__ = "0.1.0" and package docstring.

    **berryeval/cli/__init__.py** — Placeholder with a stub `app` function that prints "berryeval CLI" (no Typer dependency in Phase 1, just a callable placeholder for the entry point).

    **berryeval/metrics/__init__.py** — Set up the backend dispatch pattern:
    - Import from _python as default
    - Try import from _native, fall back to _python
    - Export: recall_at_k, precision_at_k, mrr, ndcg, hit_rate, BACKEND

    **berryeval/metrics/_types.py** — Define PADDING_ID = -1, type aliases (QueryDocArray, RelevanceArray, ScoreArray, MetricResult) using numpy.typing.NDArray.

    **berryeval/metrics/_validation.py** — Implement validate_inputs() checking: numpy array types, int32 dtype for ID arrays, 2D shape, C-contiguity, k bounds, query count match.

    **berryeval/metrics/_python.py** — Empty placeholder with function stubs that raise NotImplementedError (Plan 02 will implement).

    **berryeval/metrics/_native.py** — Conditional import wrapper that raises ImportError (C extension not available until Phase 5).

    **All other __init__.py files** — Package docstring only.

    **native/CMakeLists.txt** — Comment-only placeholder explaining this is for Phase 5 C extensions.

    **tests/conftest.py** — Import pytest, define shared fixtures:
    - sample_retrieved: 2D int32 array (5 queries, 10 results)
    - sample_relevant: 2D int32 array (5 queries, 5 relevant)
    - Use known document IDs so test results are predictable

    **tests/metrics/__init__.py** — Empty.

    **.gitignore** — Standard Python .gitignore (venv, __pycache__, *.pyc, .mypy_cache, .ruff_cache, .pytest_cache, dist/, build/, *.egg-info/).

    **README.md** — Minimal: project name, one-line description, "pip install -e '.[dev]'" instructions.

    **.gitkeep files** — Empty files in native/include/, native/src/, native/bindings/, benchmarks/ to preserve empty directories.
  </action>
  <verify>
    Run these commands and verify all pass:
    ```bash
    pip install -e ".[dev]"
    ruff check .
    ruff format --check .
    mypy berryeval
    pytest
    python -c "import berryeval; print(berryeval.__version__)"
    ```
  </verify>
  <done>
    - pyproject.toml exists with all required sections
    - All PRD-prescribed directories exist with __init__.py files
    - pip install -e ".[dev]" succeeds
    - ruff check . and ruff format --check . produce no errors
    - mypy berryeval runs (may report errors on stubs which is expected)
    - pytest runs with 0 tests collected (no test files yet)
    - `python -c "import berryeval"` succeeds
  </done>
</task>

</tasks>

<verification>
```bash
# Verify project structure
find berryeval -name "*.py" | sort
find native -type f | sort
find tests -name "*.py" | sort
ls benchmarks/

# Verify tooling
pip install -e ".[dev]"
ruff check .
ruff format --check .
mypy berryeval
pytest --co  # collect only, no tests yet
python -c "from berryeval.metrics._types import PADDING_ID; print(f'PADDING_ID={PADDING_ID}')"
```
</verification>

<success_criteria>
- All 7 berryeval subpackages exist with __init__.py
- native/ has include/, src/, bindings/, CMakeLists.txt
- tests/ has __init__.py, conftest.py, metrics/__init__.py
- pyproject.toml validates and installs cleanly
- All three dev tools (ruff, mypy, pytest) run without configuration errors
- Package is importable: `import berryeval` works
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-core-infrastructure/01-01-SUMMARY.md`
</output>
